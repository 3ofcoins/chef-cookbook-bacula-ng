---
driver_plugin: vagrant
driver_config:
  require_chef_omnibus: true

platforms:
- name: ubuntu-12.04
  driver_config:
    box: opscode-ubuntu-12.04
    box_url: https://opscode-vm.s3.amazonaws.com/vagrant/opscode_ubuntu-12.04_provisionerless.box
#- name: ubuntu-10.04
#  driver_config:
#    box: opscode-ubuntu-10.04
#    box_url: https://opscode-vm.s3.amazonaws.com/vagrant/opscode_ubuntu-10.04_provisionerless.box

suites:
  - name: default
    run_list:
      - recipe[apt]
      - recipe[chef-solo-search]
      - recipe[bacula-ng-test::iptables]
      - recipe[bacula-ng]
    attributes:
      bacula:
        fd:
          password: swordfish
        mon:
          password: swordfish
  - name: server
    run_list:
      - recipe[apt]
      - recipe[chef-solo-search]
      - recipe[bacula-ng-test::iptables]
      - recipe[bacula-ng::server]
    attributes:
      bacula:
        director:
          db_password: swordfish
          password: swordfish
        fd:
          password: swordfish
        mon:
          password: swordfish
        storage:
          password: swordfish
      postgresql:
        password:
          postgres: swordfish
